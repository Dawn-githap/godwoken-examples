
# Tools scripts

## Build typescript

```
cd godwoken-examples
yarn workspace @godwoken-examples/godwoken tsc 
yarn workspace @godwoken-examples/polyjuice tsc 
yarn workspace @godwoken-examples/tools tsc 
```

## Create creator account for polyjuice

Create account id for create polyjuice contract account (the `creator_account_id` config)
```
$ node packages/tools/lib/polyjuice-cli.js createCreatorAccount <from_id> <sudt_id> <rollup_type_hash> <privkey>
```
* You can see `<rollup_type_hash>` when godwoken started.
* `<sudt_id>` given `1` is for CKB Token.
* `<privkey>` is a `0x` prefixed hex string.
* `<from_id>` is your user account, you can get the account id by:

```
$ node packages/tools/lib/godwoken-cli.js getAccountIdByScriptHash <script_hash>
```

You can get the script hash when deposition finished.

## Deploy an Ethereum contract

```
$ node packages/tools/lib/polyjuice-cli.js deploy <creator_account_id> <init_code> <rollup_type_hash> <privkey>
```

This will output the account id.

* The `<init_code>` sample, please see sample-contracts/SimpleStorage.bin .

## Call an ethereum contract

```
$ node packages/tools/lib/polyjuice-cli.js call <to_id> <input_data> <rollup_type_hash> <privkey>
```

* `<to_id>` is the account created in deploy step.
* The `<input_data>` is generated by ethabi , please see sample-contracts/SimpleStorage.calls.md .


## Unlock Withdrawal

```bash
export LUMOS_CONFIG_FILE=<your lumos config json file>
node packages/tools/lib/godwoken-cli.js unlockWithdraw <privkey> <runner_config>
```

* The `<privkey>` is "0x" prefixed private key string exported from your MetaMask wallet.
* The `<runner_config>` is the config file path to run godwoken instance.
